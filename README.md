# 図書館システムで学ぶテストダブル

この sprint は **テストダブル（Dummy / Stub / Spy / Mock / Fake）** を実際にコードで書いて理解することを目的としています。
題材は「図書館システム」です。

---

## 🎯 学習のゴール

- テストダブルの種類と役割を理解する  
- **テストの役割**をコードで体感する  
- **依存注入（Dependency Injection）** の活用を実感する  

---

## 🗂 基本要件

下記を TDD 形式で実装してください。テストには適切なテストダブルを使用しましょう。

### `BooksService` クラス

`BooksService` は「本を借りる」というユースケースを担当しています。このクラス内に `borrowBook()` という本を借りるためのメソッドを作成しましょう。テストでは必要に応じてテストダブルに差し替えて挙動を確認しましょう。

### `borrowBook()` の仕様

   1. ユーザーが会員かどうかをチェックし、ユーザーでなければ処理終了
   2. 貸出台帳(DB) に登録する

---

## 🗂 セットアップ

1. 依存関係をインストール

```bash
npm install
```

2. テストを実行してみる

```bash
npm run test
```

※ 最初は全てのテストがスキップされていることが確認できます。

3. `__tests__/BooksService.test` にテストを書いてください。
4. テストがエラーになることを確認してください。
5. 実装を追加してください。
6. テストがすべてパスすることを確認してください。

---

## 🚀 チャレンジ問題

さらに理解を深めたい人向けに、次の課題に挑戦してください：

- `BooksRepository` の Fake を自分で実装してみよう！
   - メモリ上の Map を使って実装する
   - それをテストで差し込み、貸出フローを通して正しく動くことを確認する

## 💡 ポイント

- `src/services` 配下にはテスト対象となる最小限のクラスを、`src/typs` 配下には必要なインターフェース が用意されています。
   - 今回の課題は「実装を完成させる」のではなく「テストを書くこと」が目的です。そのため、これらは完成品の実装ではなく、最低限の実装だけが用意されています。
   - 実際の動作は、テストダブル（Dummy, Stub, Fake など）を差し込んで確認しましょう。

👉 sprint を通じてテストダブルを使いこなし、より信頼性の高いコードを書く力 を身につけましょう！
